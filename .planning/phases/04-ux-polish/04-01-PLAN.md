---
phase: 04-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - get-shit-done/bin/gsd-tools.js
  - get-shit-done/references/terminology.md
autonomous: true

must_haves:
  truths:
    - "Error messages say 'project header' instead of 'frontmatter' or 'YAML'"
    - "Error messages say 'project workspace' instead of 'git branch'"
    - "Every error message includes what went wrong AND what to do next"
    - "No blame language (invalid, failed, illegal) in user-facing error output"
    - "Technical details hidden by default, available via GSD_VERBOSE=true"
  artifacts:
    - path: "get-shit-done/references/terminology.md"
      provides: "Developer-to-business term mapping dictionary"
      contains: "frontmatter"
    - path: "get-shit-done/bin/gsd-tools.js"
      provides: "PM-friendly error messages throughout"
      contains: "project header"
  key_links:
    - from: "get-shit-done/bin/gsd-tools.js"
      to: "get-shit-done/references/terminology.md"
      via: "terminology consistency"
      pattern: "project header|project workspace"
---

<objective>
Rewrite all user-facing error messages in gsd-tools.js from developer terminology to PM-friendly business language, guided by a centralized terminology dictionary.

Purpose: PMs using GSD should never encounter terms like "frontmatter," "YAML," "git branch," or "invalid" in error output. Every error should tell them what happened, why it matters, and what to do next (CLEAR framework: Context, Location, Explanation, Action, Resources).

Output: Updated gsd-tools.js with ~80+ rewritten error messages, enhanced error() function with progressive disclosure, and a terminology reference document.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-ux-polish/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create terminology dictionary and enhance error() function</name>
  <files>
    get-shit-done/references/terminology.md
    get-shit-done/bin/gsd-tools.js
  </files>
  <action>
**Step 1: Create terminology dictionary**

Create `get-shit-done/references/terminology.md` with the developer-to-business term mapping. This serves as the reference for all message rewrites. Use the mappings from 04-RESEARCH.md:

```markdown
# Terminology: Developer to Business

| Developer Term | Business Term | Context |
|----------------|---------------|---------|
| frontmatter | project header | YAML block at top of .md files |
| frontmatter YAML | project header | Same as above |
| YAML | configuration / settings | Generic data format |
| git branch | project workspace | Branch isolation |
| branch | workspace | Short form |
| commit | save | Git commit |
| repository | project | Git repo |
| merge | combine changes | Git merge |
| checkout | switch to | Git checkout |
| directory | folder | File system |
| path | location | File path |
| parsing | reading | Technical process |
| validation | checking | Technical process |
| initialization | setup | Technical process |
| invalid | (describe what's needed instead) | Blame language |
| failed | couldn't complete | Blame language |
| error | problem | Blame language |
| exception | issue | Blame language |
| stack trace | technical details | Debug info |
| dependencies | required items | Technical concept |
| environment variable | system setting | Technical concept |
| CLI | command tool | Technical concept |
```

**Step 2: Enhance the error() function (line 475)**

Replace the current error() function:
```javascript
function error(message) {
  process.stderr.write('Error: ' + message + '\n');
  process.exit(1);
}
```

With an enhanced version supporting progressive disclosure:
```javascript
function error(message, technicalDetails) {
  process.stderr.write('Problem: ' + message + '\n');
  if (technicalDetails && process.env.GSD_VERBOSE === 'true') {
    process.stderr.write('\nTechnical details:\n' + technicalDetails + '\n');
  }
  process.exit(1);
}
```

Key changes:
- "Error:" prefix becomes "Problem:" (less alarming, per research)
- Add optional `technicalDetails` parameter for progressive disclosure
- Technical details only shown when `GSD_VERBOSE=true` environment variable is set
- Existing calls with single argument continue to work unchanged (backward compatible)

**IMPORTANT:** Do NOT change function names, variable names, code comments, or internal error key names in JSON output objects. Only change user-facing string content that gets displayed to the PM.
  </action>
  <verify>
1. `get-shit-done/references/terminology.md` exists and contains the full mapping table
2. `grep -n "function error" get-shit-done/bin/gsd-tools.js` shows updated function signature with technicalDetails parameter
3. `grep -n "Problem:" get-shit-done/bin/gsd-tools.js` confirms prefix change
4. `grep -n "GSD_VERBOSE" get-shit-done/bin/gsd-tools.js` confirms progressive disclosure support
  </verify>
  <done>
Terminology dictionary created. error() function enhanced with "Problem:" prefix and progressive disclosure via GSD_VERBOSE.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rewrite all user-facing error messages in gsd-tools.js</name>
  <files>get-shit-done/bin/gsd-tools.js</files>
  <action>
Systematically rewrite all user-facing error messages in gsd-tools.js. Work through the file section by section. Use the terminology dictionary as reference. Apply the CLEAR framework (Context, Explanation, Action) to each message.

**CRITICAL RULES:**
- Only change user-facing string literals passed to `error()`, `throw new Error()`, and string values in `output({ error: ... })` calls
- Do NOT rename variables, function names, JSON keys, or code comments
- Do NOT change internal logic or control flow
- Keep error key names like `{ error: '...' }` as `error` (these are JSON API contracts, not user-facing labels)
- When in doubt, keep the original — under-replacement is safer than over-replacement

**Section-by-section rewrites:**

**PathResolver section (lines ~550-615):**
- Line 554: `'Active project file is empty'` -> `'The current project is not set up correctly. Run /gsd:list-projects to see available projects, then /gsd:switch-project {name}'`
- Line 586: `Failed to load project context from .active-project: ${err.message}` -> `'Couldn\'t read current project settings. The project file may be corrupted. Run /gsd:list-projects to choose a project'`, with technical detail `err.message`
- Line 611: `'No active project. Run /gsd:switch-project or /gsd:new-project to select one.'` -> `'No project is currently active. Choose a project with /gsd:switch-project {name} or create one with /gsd:new-project'`

**Utility commands (lines ~715-900):**
- Line 715: `'text required for slug generation'` -> `'Please provide a name to generate a project identifier'`
- Line 786: `'path required for verification'` -> `'Please specify which folder to check'`
- Line 812: `'Failed to create .planning directory: '` -> `'Couldn\'t create the planning folder: '`, with technical detail
- Line 849: `'Failed to create config.json: '` -> `'Couldn\'t save project settings: '`, with technical detail
- Line 857: `'Usage: config-set <key.path> <value>'` -> `'Please provide a setting name and value (e.g., config-set mode yolo)'`
- Line 873: `'Failed to read config.json: '` -> `'Couldn\'t read project settings: '`, with technical detail
- Line 894: `'Failed to write config.json: '` -> `'Couldn\'t save project settings: '`, with technical detail

**History/phases (lines ~979-1178):**
- Line 979: `'Failed to generate history digest: '` -> `'Couldn\'t read project history: '`, with technical detail
- Line 1051: `'Failed to list phases: '` -> `'Couldn\'t list phases: '`, with technical detail
- Line 1109: `'Failed to read ROADMAP.md: '` -> `'Couldn\'t read the roadmap: '`, with technical detail
- Line 1178: `'Failed to calculate next decimal phase: '` -> `'Couldn\'t determine the next phase number: '`, with technical detail

**State management (lines ~1258-1550):**
- Line 1258: `'STATE.md not found'` -> `'Project state file not found. Run /gsd:new-project to set up a project'`
- Line 1286: `'STATE.md not found'` -> `'Project state file not found. Run /gsd:new-project to set up a project'`
- Line 1292: `'field and value required for state update'` -> `'Please specify what to update and the new value'`
- Line 1549: `'agent-type required'` -> `'Please specify which agent type to use'`
- Line 1569: `'phase identifier required'` -> `'Please specify which phase (e.g., 1 or 01-foundation)'`

**Commit/verify (lines ~1613-1802):**
- Line 1613: `'commit message required'` -> `'Please provide a description of what changed'`
- Line 1661: `'summary-path required'` -> `'Please specify the summary file location'`
- Line 1757: `'plan-path required'` -> `'Please specify the plan file location'`
- Line 1802 first: `'template type required: summary, plan, or verification'` -> `'Please specify the template type: summary, plan, or verification'`
- Line 1802 second: `'--phase required'` -> `'Please specify which phase this template is for'`
- Line 1950: `Unknown template type: ${templateType}. Available: summary, plan, verification` -> `'Template type "${templateType}" not recognized. Available types: summary, plan, verification'`

**Phase plan index (line 1969):**
- `'phase required for phase-plan-index'` -> `'Please specify which phase to index'`

**Summary extract (line 2178):**
- `'summary-path required for summary-extract'` -> `'Please specify which summary file to read'`

**Frontmatter CRUD (lines ~2298-2357):**
- Line 2298: `'file path required'` -> `'Please specify which file to read'`
- Line 2313: `'file, field, and value required'` -> `'Please specify the file, field name, and new value'`
- Line 2327: `'file and data required'` -> `'Please specify the file and the data to merge'`
- Line 2333: `'Invalid JSON for --data'` -> `'The provided data is not in the correct format. Please check the JSON syntax'`
- Line 2347: `'file and schema required'` -> `'Please specify the file and which schema to check against'`
- Line 2349: `Unknown schema: ${schemaName}. Available: ${...}` -> `'Schema "${schemaName}" not recognized. Available: ${...}'`

**Verification suite (lines ~2362-2420):**
- Line 2362: `'file path required'` -> `'Please specify which plan file to check'`
- Line 2374: `Missing required frontmatter field: ${field}` -> `The project header is missing the '${field}' field`
- Line 2390: `'Task missing <name> element'` -> `'A task is missing its name'`
- Line 2391: `Task '${taskName}' missing <action>` -> `Task '${taskName}' is missing its action steps`
- Line 2409: `'Has checkpoint tasks but autonomous is not false'` -> `'Plan has review checkpoints but is marked as fully automatic. Set autonomous to false'`
- Line 2423: `'phase required'` -> `'Please specify which phase to check'`

**Phase operations (lines ~2773-2940):**
- Line 2773: `'description required for phase add'` -> `'Please provide a description for the new phase'`
- Line 2778: `'ROADMAP.md not found'` -> `'Roadmap not found. Run /gsd:new-project to set up a project first'`
- Line 2830: `'after-phase and description required for phase insert'` -> `'Please specify which phase to insert after and provide a description'`
- Line 2835: `'ROADMAP.md not found'` -> `'Roadmap not found. Run /gsd:new-project to set up a project first'`
- Line 2845: `Phase ${afterPhase} not found in ROADMAP.md` -> `Phase ${afterPhase} doesn't exist in the roadmap. Check /gsd:progress for current phases`
- Line 2878: `Could not find Phase ${afterPhase} header` -> `Couldn't locate Phase ${afterPhase} in the roadmap. The roadmap structure may need repair`
- Line 2910: `'phase number required for phase remove'` -> `'Please specify which phase number to remove'`
- Line 2918: `'ROADMAP.md not found'` -> `'Roadmap not found. Run /gsd:new-project to set up a project first'`
- Line 2939: `Phase ${targetPhase} has ${summaries.length} executed plan(s). Use --force to remove anyway.` -> `Phase ${targetPhase} has ${summaries.length} completed plan(s). Use --force to remove anyway.`

**Phase complete (line 3163-3175):**
- Line 3163: `'phase number required for phase complete'` -> `'Please specify which phase number to mark as complete'`
- Line 3175: `Phase ${phaseNum} not found` -> `Phase ${phaseNum} doesn't exist in the roadmap. Run /gsd:progress to see current phases`

**Milestone complete (line 3305):**
- `'version required for milestone complete (e.g., v1.0)'` -> `'Please specify the milestone version (e.g., v1.0)'`

**Todo (lines ~3621-3693):**
- Line 3621: `'filename required for todo complete'` -> `'Please specify which todo to mark as complete'`
- Line 3629: `Todo not found: ${filename}` -> `Couldn't find todo "${filename}". Run /gsd:check-todos to see available todos`
- Line 3658: `Phase ${phase} directory not found` -> `Phase ${phase} folder not found. Check that the phase exists in the roadmap`
- Line 3681: `'phase and name required for phase-dir scaffold'` -> `'Please specify the phase number and name for the new phase folder'`
- Line 3693: `Unknown scaffold type: ${type}. Available: context, uat, verification, phase-dir` -> `Scaffold type "${type}" not recognized. Available: context, uat, verification, phase-dir`

**Init commands (lines ~4373-5485):**
- Line 4373: `'phase required for init execute-phase'` -> `'Please specify which phase to initialize'`
- Line 4449: `'phase required for init plan-phase'` -> `'Please specify which phase to plan'`
- Line 4726: `'phase required for init verify-work'` -> `'Please specify which phase to verify'`
- Line 5082: Keep the full usage string but change "Error: Usage:" to just output the usage
- Line 5196: `'Unknown template subcommand. Available: select, fill'` -> `'Template command "${...}" not recognized. Available: select, fill'`
- Line 5218: `'Unknown frontmatter subcommand. Available: get, set, merge, validate'` -> `'Command not recognized. Available: get, set, merge, validate'`
- Line 5238: `'Unknown verify subcommand. Available: plan-structure, phase-completeness, references, commits, artifacts, key-links'` -> `'Verify command not recognized. Available: plan-structure, phase-completeness, references, commits, artifacts, key-links'`
- Line 5289-5485: Apply same pattern to all remaining "Unknown X subcommand" messages: `'{X} command not recognized. Available: {list}'`

**output() JSON error values:**
For `output({ error: '...' })` calls, update the string values to use business language but keep the `error` key name unchanged (it's a JSON API contract):
- `{ error: 'File not found', path: ... }` -> `{ error: 'File not found', path: ..., action: 'Check the file location and try again' }`
- `{ error: 'Phase not found' }` -> `{ error: 'Phase not found', action: 'Run /gsd:progress to see available phases' }`
- `{ error: 'STATE.md not found' }` -> `{ error: 'Project state not found', action: 'Run /gsd:new-project to set up a project' }`
- `{ error: 'Cannot parse Current Plan...' }` -> `{ error: 'Could not read current progress from project state' }`

Add `action` fields to JSON error outputs where helpful, so consuming workflows can display actionable guidance.
  </action>
  <verify>
1. `grep -c "frontmatter" get-shit-done/bin/gsd-tools.js` — count should be lower than before (only in function names, variable names, and comments — NOT in user-facing strings)
2. `grep -n "project header" get-shit-done/bin/gsd-tools.js` confirms new terminology in validation messages
3. `grep -n "invalid\|illegal" get-shit-done/bin/gsd-tools.js` — no blame language in error() calls (may exist in code logic, but not in user-facing strings)
4. `grep -c "Problem:" get-shit-done/bin/gsd-tools.js` — confirms error prefix change
5. `node get-shit-done/bin/gsd-tools.js --help 2>&1` — still runs without syntax errors
6. `node get-shit-done/bin/gsd-tools.js frontmatter validate nonexistent --schema plan 2>&1` — shows PM-friendly error
  </verify>
  <done>
All ~80+ user-facing error messages in gsd-tools.js rewritten to use business language. No blame language. Every error includes actionable guidance. Technical details available via GSD_VERBOSE=true. Function names, variable names, JSON keys, and code comments unchanged.
  </done>
</task>

</tasks>

<verification>
1. Run `node get-shit-done/bin/gsd-tools.js` with no args — should show usage without crashing
2. Run `node get-shit-done/bin/gsd-tools.js state get nonexistent` — should show PM-friendly error
3. Grep for "frontmatter" in user-facing error strings (should find zero)
4. Grep for "project header" (should find instances in validation messages)
5. Grep for "Problem:" (should find in error function)
6. No "invalid" or "failed" as standalone blame words in error() call arguments
7. terminology.md exists with complete mapping table
</verification>

<success_criteria>
- Every error() call uses business language, not developer jargon
- Every error message tells PM what to do next
- "frontmatter" replaced with "project header" in all user-facing strings
- "git branch" replaced with "project workspace" in all user-facing strings
- error() function supports progressive disclosure via GSD_VERBOSE
- terminology.md provides canonical mapping reference
- No functional changes — only string content changes
</success_criteria>

<output>
After completion, create `.planning/phases/04-ux-polish/04-01-SUMMARY.md`
</output>
